{"ast":null,"code":"import _slicedToArray from\"C:/Nina/Projects/Pro/borne-interactive/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from\"react\";import Button from\"./Button\";import{GlobalContext}from'../App.jsx';import{observer}from\"mobx-react-lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function QuantityButton(_ref){var _ref$row=_ref.row,row=_ref$row===void 0?true:_ref$row,className=_ref.className,article=_ref.article,small=_ref.small,_ref$popUp=_ref.popUp,popUp=_ref$popUp===void 0?false:_ref$popUp;var _useContext=useContext(GlobalContext),cartStore=_useContext.cartStore;var direction=row?\"row\":\"col\";var _useState=useState(''),_useState2=_slicedToArray(_useState,2),animationClass=_useState2[0],setAnimationClass=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),animationKey=_useState4[0],setAnimationKey=_useState4[1];var disabled=article.quantity>0?false:true;var test=article.quantity;var _useState5=useState(cartStore.getQuantityForArticle(article)),_useState6=_slicedToArray(_useState5,2),previousQuantity=_useState6[0],setPreviousQuantity=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isFirstRender=_useState8[0],setIsFirstRender=_useState8[1];var handleAddToCart=function handleAddToCart(){cartStore.addCart(article);};var handleRemoveFromCart=function handleRemoveFromCart(){cartStore.removeFromCart(article);};useEffect(function(){var currentQuantity=cartStore.getQuantityForArticle(article);if(!isFirstRender){if(currentQuantity>previousQuantity){if(row){setAnimationClass('slide-left-animation');}else{setAnimationClass('slide-up-animation');}setAnimationKey(function(prev){return prev+1;});}else if(currentQuantity<previousQuantity){if(row){setAnimationClass('slide-right-animation');}else{setAnimationClass('slide-down-animation');}setAnimationKey(function(prev){return prev+1;});}}else{setIsFirstRender(false);}setPreviousQuantity(currentQuantity);},[cartStore.getQuantityForArticle(article)]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-\".concat(direction,\" justify-between items-center \").concat(className&&className),children:[row===false?/*#__PURE__*/_jsx(Button,{title:\"Ajouter\",icon:\"faPlus\",onClick:handleAddToCart,small:small&&small===true?true:false}):/*#__PURE__*/_jsx(Button,{title:\"Retirer\",icon:\"faMinus\",onClick:handleRemoveFromCart,small:small&&small===true?true:false,disabled:disabled}),/*#__PURE__*/_jsx(\"p\",{className:\"p-3 \".concat(popUp===true?\"lg:text-4xl sm:text-3xl\":\"text-2xl\",\" \").concat(animationClass),children:cartStore.getQuantityForArticle(article)},animationKey),row===false?/*#__PURE__*/_jsx(Button,{title:\"Retirer\",icon:\"faMinus\",onClick:handleRemoveFromCart,small:small&&small===true?true:false,disabled:disabled}):/*#__PURE__*/_jsx(Button,{title:\"Ajouter\",icon:\"faPlus\",onClick:handleAddToCart,small:small&&small===true?true:false})]});}export default observer(QuantityButton);","map":{"version":3,"names":["React","useContext","useState","useEffect","Button","GlobalContext","observer","jsx","_jsx","jsxs","_jsxs","QuantityButton","_ref","_ref$row","row","className","article","small","_ref$popUp","popUp","_useContext","cartStore","direction","_useState","_useState2","_slicedToArray","animationClass","setAnimationClass","_useState3","_useState4","animationKey","setAnimationKey","disabled","quantity","test","_useState5","getQuantityForArticle","_useState6","previousQuantity","setPreviousQuantity","_useState7","_useState8","isFirstRender","setIsFirstRender","handleAddToCart","addCart","handleRemoveFromCart","removeFromCart","currentQuantity","prev","concat","children","title","icon","onClick"],"sources":["C:/Nina/Projects/Pro/borne-interactive/src/components/QuantityButton.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport Button from \"./Button\";\nimport { GlobalContext } from '../App.jsx';\nimport { observer } from \"mobx-react-lite\";\n\nfunction QuantityButton({ row = true, className, article, small, popUp = false }) {\n\n    const { cartStore } = useContext(GlobalContext);\n    const direction = row ? \"row\" : \"col\";\n    const [animationClass, setAnimationClass] = useState('');\n    const [animationKey, setAnimationKey] = useState(0);\n    const disabled = article.quantity > 0 ? false : true;\n    const test = article.quantity;\n    const [previousQuantity, setPreviousQuantity] = useState(cartStore.getQuantityForArticle(article));\n    const [isFirstRender, setIsFirstRender] = useState(true);\n\n\n    const handleAddToCart = () => {\n        cartStore.addCart(article);\n    };\n\n    const handleRemoveFromCart = () => {\n        cartStore.removeFromCart(article);\n    };\n\n    useEffect(() => {\n        const currentQuantity = cartStore.getQuantityForArticle(article);\n\n        if (!isFirstRender) {\n            if (currentQuantity > previousQuantity) {\n                if (row) {\n                    setAnimationClass('slide-left-animation');\n                } else {\n                    setAnimationClass('slide-up-animation');\n                }\n                setAnimationKey(prev => prev + 1);\n            } else if (currentQuantity < previousQuantity) {\n                if (row) {\n                    setAnimationClass('slide-right-animation');\n                } else {\n                    setAnimationClass('slide-down-animation');\n                }\n                setAnimationKey(prev => prev + 1);\n            }\n        } else {\n            setIsFirstRender(false);\n        }\n\n        setPreviousQuantity(currentQuantity);\n    }, [cartStore.getQuantityForArticle(article)]);\n\n\n    return (\n\n        <div className={`flex flex-${direction} justify-between items-center ${className && className}`}>\n            {row === false\n                ? <Button title=\"Ajouter\" icon=\"faPlus\" onClick={handleAddToCart} small={small && small === true ? true : false} />\n                : <Button title=\"Retirer\" icon=\"faMinus\" onClick={handleRemoveFromCart} small={small && small === true ? true : false} disabled={disabled} />}\n            <p key={animationKey} className={`p-3 ${popUp === true ? `lg:text-4xl sm:text-3xl` : `text-2xl`} ${animationClass}`}>\n                {cartStore.getQuantityForArticle(article)}\n            </p>\n            {row === false\n                ? <Button title=\"Retirer\" icon=\"faMinus\" onClick={handleRemoveFromCart} small={small && small === true ? true : false} disabled={disabled} />\n                : <Button title=\"Ajouter\" icon=\"faPlus\" onClick={handleAddToCart} small={small && small === true ? true : false} />}\n        </div>\n\n    )\n}\n\nexport default observer(QuantityButton);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}