{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nconst TPS_VALUE = 0.05;\nconst TVQ_VALUE = 9.975;\nclass CartStore {\n  // Tableau pour stocker les articles du panier\n\n  constructor() {\n    let currentCart = localStorage.getItem(\"Panier\");\n    if (currentCart == null) {\n      this._cart = [];\n    } else {\n      this._cart = JSON.parse(currentCart);\n    }\n    makeAutoObservable(this);\n  }\n  get cart() {\n    return this._cart;\n  }\n  set cart(cart) {\n    this._cart = cart;\n  }\n\n  //Sauvegarde le panier dans le localStorage\n  saveCart() {\n    localStorage.setItem(\"Panier\", JSON.stringify(this.cart));\n  }\n\n  //Ajoute un article dans le panier\n  addCart(article) {\n    let foundArticle = this.cart.find(item => item.id == article.id);\n    if (foundArticle != undefined) {\n      foundArticle.quantity++;\n    } else {\n      article.quantity = 1;\n      this.cart.push(article);\n    }\n    this.saveCart();\n  }\n\n  //Retire un article du panier\n  removeFromCart(article) {\n    if (article.quantity > 1) {\n      article.quantity--;\n    } else {\n      article.quantity = 0;\n      this.cart = this.cart.filter(item => item.id != article.id);\n    }\n    this.saveCart();\n  }\n  changeQuantity(article, quantity) {\n    let foundArticle = this.cart.find(item => item.id == article.id);\n    if (foundArticle != undefined) {\n      foundArticle.quantity += quantity;\n      if (foundArticle.quantity <= 0) {\n        this.removeFromCart(foundArticle);\n      } else {\n        this.saveCart();\n      }\n    }\n  }\n\n  //Récupère le nombre total d'articles dans le panier\n  getNumberArticle() {\n    let number = 0;\n    for (let item of this.cart) {\n      number += item.quantity;\n    }\n    return number;\n  }\n\n  //Récupère le montant total du panier\n  getTotalPrice() {\n    let total = 0;\n    for (let item of this.cart) {\n      total += item.quantity * item.price;\n    }\n    return total;\n  }\n\n  //Calcul TPS\n  getTPS() {\n    let tps = this.getTotalPrice * TPS_VALUE;\n    return tps;\n  }\n\n  //Calcul TVQ\n  getTVQ() {\n    let tvq = this.getTotalPrice * TVQ_VALUE;\n    return tvq;\n  }\n\n  //Récupère le montant total du panier avec taxes\n  getTotalPrice() {\n    let total = 0;\n    for (let item of this.cart) {\n      total += item.quantity * item.price;\n    }\n    return total;\n  }\n\n  //Récupère la quantité d'un article présent dans le panier\n  getQuantityForArticle(article) {\n    const foundArticle = this.cart.find(item => item.id === article.id);\n    return foundArticle ? foundArticle.quantity : 0;\n  }\n\n  //Récupère le contenu du panier sous forme d'objet\n  getCartContents() {\n    const cartContents = [];\n    for (const item of this.cart) {\n      cartContents.push({\n        id: item._id,\n        name: item._name,\n        quantity: item._quantity,\n        price: item._price\n      });\n    }\n    return cartContents;\n  }\n\n  // Vide le localStorage\n  clearLocalStorage() {\n    localStorage.removeItem(\"Panier\");\n    this._cart = [];\n    this.saveCart();\n  }\n}\nexport default CartStore;","map":{"version":3,"names":["makeAutoObservable","TPS_VALUE","TVQ_VALUE","CartStore","constructor","currentCart","localStorage","getItem","_cart","JSON","parse","cart","saveCart","setItem","stringify","addCart","article","foundArticle","find","item","id","undefined","quantity","push","removeFromCart","filter","changeQuantity","getNumberArticle","number","getTotalPrice","total","price","getTPS","tps","getTVQ","tvq","getQuantityForArticle","getCartContents","cartContents","_id","name","_name","_quantity","_price","clearLocalStorage","removeItem"],"sources":["C:/Nina/Scolarite/Matane/ProjetMultimedia/Borne/PM4-TP2/appreact/src/store/CartStore.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\r\n\r\nconst TPS_VALUE = 0.05;\r\nconst TVQ_VALUE =  9.975;\r\n\r\n\r\nclass CartStore {\r\n    _cart; // Tableau pour stocker les articles du panier\r\n\r\n    constructor() {\r\n        let currentCart = localStorage.getItem(\"Panier\");\r\n        if (currentCart == null) {\r\n            this._cart = [];\r\n        } else {\r\n            this._cart = JSON.parse(currentCart);\r\n        }\r\n\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    get cart() { return this._cart; }\r\n\r\n    set cart(cart) { this._cart = cart; }\r\n\r\n    //Sauvegarde le panier dans le localStorage\r\n    saveCart() {\r\n        localStorage.setItem(\"Panier\", JSON.stringify(this.cart));\r\n    }\r\n\r\n    //Ajoute un article dans le panier\r\n    addCart(article) {\r\n        let foundArticle = this.cart.find(item => item.id == article.id);\r\n        if (foundArticle != undefined) {\r\n            foundArticle.quantity++;\r\n        } else {\r\n            article.quantity = 1;\r\n            this.cart.push(article);\r\n        }\r\n        this.saveCart();\r\n    }\r\n\r\n    //Retire un article du panier\r\n    removeFromCart(article) {\r\n        if (article.quantity > 1) {\r\n            article.quantity--;\r\n        } else {\r\n            article.quantity = 0;\r\n            this.cart = this.cart.filter(item => item.id != article.id);\r\n        }\r\n        this.saveCart();\r\n    }\r\n\r\n    changeQuantity(article, quantity) {\r\n        let foundArticle = this.cart.find(item => item.id == article.id);\r\n        if (foundArticle != undefined) {\r\n            foundArticle.quantity += quantity;\r\n            if (foundArticle.quantity <= 0) {\r\n                this.removeFromCart(foundArticle);\r\n            } else {\r\n                this.saveCart();\r\n            }\r\n        }\r\n    }\r\n\r\n    //Récupère le nombre total d'articles dans le panier\r\n    getNumberArticle() {\r\n        let number = 0;\r\n        for (let item of this.cart) {\r\n            number += item.quantity;\r\n        }\r\n        return number;\r\n    }\r\n\r\n    //Récupère le montant total du panier\r\n    getTotalPrice() {\r\n        let total = 0;\r\n        for (let item of this.cart) {\r\n            total += item.quantity * item.price;\r\n        }\r\n        return total;\r\n    }\r\n\r\n     //Calcul TPS\r\n     getTPS() {\r\n        let tps = this.getTotalPrice * TPS_VALUE;\r\n        return tps;\r\n    }\r\n\r\n     //Calcul TVQ\r\n     getTVQ() {\r\n        let tvq = this.getTotalPrice * TVQ_VALUE;\r\n        return tvq;\r\n    }\r\n\r\n     //Récupère le montant total du panier avec taxes\r\n     getTotalPrice() {\r\n        let total = 0;\r\n        for (let item of this.cart) {\r\n            total += item.quantity * item.price;\r\n        }\r\n        return total;\r\n    }\r\n\r\n    //Récupère la quantité d'un article présent dans le panier\r\n    getQuantityForArticle(article) {\r\n        const foundArticle = this.cart.find((item) => item.id === article.id);\r\n        return foundArticle ? foundArticle.quantity : 0;\r\n    }\r\n\r\n    //Récupère le contenu du panier sous forme d'objet\r\n    getCartContents() {\r\n        const cartContents = [];\r\n        for (const item of this.cart) {\r\n            cartContents.push({\r\n                id: item._id,\r\n                name: item._name,\r\n                quantity: item._quantity,\r\n                price: item._price\r\n            });\r\n        }\r\n        return cartContents;\r\n    }\r\n\r\n    // Vide le localStorage\r\n    clearLocalStorage() {\r\n        localStorage.removeItem(\"Panier\");\r\n        this._cart = [];\r\n        this.saveCart();\r\n    }\r\n\r\n}\r\n\r\nexport default CartStore;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}