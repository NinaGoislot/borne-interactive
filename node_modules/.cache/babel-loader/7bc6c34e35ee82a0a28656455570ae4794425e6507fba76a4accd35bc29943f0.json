{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nclass CartStore {\n  constructor() {\n    this.addCart = article => {\n      let cart = getCart();\n      let foundArticle = cart.find(item => item.id == article.id);\n      if (foundArticle != undefined) {\n        foundArticle.quantity++;\n      } else {\n        product.quantity = 1;\n      }\n      cart.push(article);\n      saveCart(cart);\n    };\n    this.removeFromCart = article => {\n      let cart = getCart();\n      cart = cart.filter(item => item.id != article.id);\n      saveCart(cart);\n    };\n    this.changeQuantity = (article, quantity) => {\n      let cart = getCart();\n      let foundArticle = cart.find(item => item.id == article.id);\n      if (foundArticle != undefined) {\n        foundArticle.quantity += quantity;\n        if (foundArticle.quantity <= 0) {\n          removeFromCart(foundArticle);\n        } else {\n          saveCart(cart);\n        }\n      }\n    };\n    this.saveCart = cart => {\n      localStorage.setItem(\"basket\", JSON.stringify(cart));\n    };\n    this.getCart = () => {};\n    this.getNumberArticle = () => {\n      let cart = getCart();\n      let number = 0;\n      for (let item of cart) {\n        number += item.quantity;\n      }\n      return number;\n    };\n    this.getTotalPrice = () => {\n      let cart = getCart();\n      let total = 0;\n      for (let item of cart) {\n        total += item.quantity * item.price;\n      }\n      return total;\n    };\n    let _cart = localStorage.getItem(\"basket\");\n    if (_cart == null) {\n      return [];\n    } else {\n      return JSON.parse(_cart);\n    }\n  }\n}\nexport default CartStore;","map":{"version":3,"names":["makeAutoObservable","CartStore","constructor","addCart","article","cart","getCart","foundArticle","find","item","id","undefined","quantity","product","push","saveCart","removeFromCart","filter","changeQuantity","localStorage","setItem","JSON","stringify","getNumberArticle","number","getTotalPrice","total","price","getItem","parse"],"sources":["C:/Nina/Scolarite/Matane/ProjetMultimedia/Borne/PM4-TP2/appreact/src/store/CartStore.js"],"sourcesContent":["import { makeAutoObservable} from \"mobx\";\r\n\r\n\r\nclass CartStore {\r\n\r\n    constructor() {\r\n        let cart = localStorage.getItem(\"basket\");\r\n        if (cart == null) {\r\n            return [];\r\n        } else {\r\n            return JSON.parse(cart);\r\n        }\r\n    }\r\n\r\n    addCart = (article) => {\r\n        let cart = getCart();\r\n        let foundArticle = cart.find (item => item.id == article.id );\r\n        if (foundArticle != undefined) {\r\n            foundArticle.quantity++;\r\n        } else {\r\n            product.quantity = 1;\r\n        }\r\n        cart.push(article);\r\n        saveCart(cart);\r\n    }\r\n\r\n    removeFromCart = (article) => {\r\n        let cart = getCart();\r\n        cart = cart.filter(item => item.id != article.id);\r\n        saveCart(cart);\r\n    }\r\n\r\n    changeQuantity = (article, quantity) => {\r\n        let cart = getCart();\r\n        let foundArticle = cart.find (item => item.id == article.id );\r\n        if (foundArticle != undefined) {\r\n            foundArticle.quantity+= quantity;\r\n            if (foundArticle.quantity <= 0) {\r\n                removeFromCart(foundArticle);\r\n            } else {\r\n                saveCart(cart);\r\n            }\r\n        }\r\n    }\r\n\r\n    saveCart = (cart) =>  {\r\n        localStorage.setItem(\"basket\", JSON.stringify(cart)); \r\n    }\r\n\r\n    getCart = () =>  {\r\n       \r\n    }\r\n\r\n    getNumberArticle = () => {\r\n        let cart = getCart();\r\n        let number = 0;\r\n        for (let item of cart) {\r\n            number += item.quantity;\r\n        }\r\n        return number;\r\n    }\r\n\r\n     getTotalPrice = () => {\r\n        let cart = getCart();\r\n        let total = 0;\r\n        for (let item of cart) {\r\n            total += item.quantity * item.price;\r\n        }\r\n        return total;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default CartStore;"],"mappings":"AAAA,SAASA,kBAAkB,QAAO,MAAM;AAGxC,MAAMC,SAAS,CAAC;EAEZC,WAAWA,CAAA,EAAG;IAAA,KASdC,OAAO,GAAIC,OAAO,IAAK;MACnB,IAAIC,IAAI,GAAGC,OAAO,CAAC,CAAC;MACpB,IAAIC,YAAY,GAAGF,IAAI,CAACG,IAAI,CAAEC,IAAI,IAAIA,IAAI,CAACC,EAAE,IAAIN,OAAO,CAACM,EAAG,CAAC;MAC7D,IAAIH,YAAY,IAAII,SAAS,EAAE;QAC3BJ,YAAY,CAACK,QAAQ,EAAE;MAC3B,CAAC,MAAM;QACHC,OAAO,CAACD,QAAQ,GAAG,CAAC;MACxB;MACAP,IAAI,CAACS,IAAI,CAACV,OAAO,CAAC;MAClBW,QAAQ,CAACV,IAAI,CAAC;IAClB,CAAC;IAAA,KAEDW,cAAc,GAAIZ,OAAO,IAAK;MAC1B,IAAIC,IAAI,GAAGC,OAAO,CAAC,CAAC;MACpBD,IAAI,GAAGA,IAAI,CAACY,MAAM,CAACR,IAAI,IAAIA,IAAI,CAACC,EAAE,IAAIN,OAAO,CAACM,EAAE,CAAC;MACjDK,QAAQ,CAACV,IAAI,CAAC;IAClB,CAAC;IAAA,KAEDa,cAAc,GAAG,CAACd,OAAO,EAAEQ,QAAQ,KAAK;MACpC,IAAIP,IAAI,GAAGC,OAAO,CAAC,CAAC;MACpB,IAAIC,YAAY,GAAGF,IAAI,CAACG,IAAI,CAAEC,IAAI,IAAIA,IAAI,CAACC,EAAE,IAAIN,OAAO,CAACM,EAAG,CAAC;MAC7D,IAAIH,YAAY,IAAII,SAAS,EAAE;QAC3BJ,YAAY,CAACK,QAAQ,IAAGA,QAAQ;QAChC,IAAIL,YAAY,CAACK,QAAQ,IAAI,CAAC,EAAE;UAC5BI,cAAc,CAACT,YAAY,CAAC;QAChC,CAAC,MAAM;UACHQ,QAAQ,CAACV,IAAI,CAAC;QAClB;MACJ;IACJ,CAAC;IAAA,KAEDU,QAAQ,GAAIV,IAAI,IAAM;MAClBc,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAACjB,IAAI,CAAC,CAAC;IACxD,CAAC;IAAA,KAEDC,OAAO,GAAG,MAAO,CAEjB,CAAC;IAAA,KAEDiB,gBAAgB,GAAG,MAAM;MACrB,IAAIlB,IAAI,GAAGC,OAAO,CAAC,CAAC;MACpB,IAAIkB,MAAM,GAAG,CAAC;MACd,KAAK,IAAIf,IAAI,IAAIJ,IAAI,EAAE;QACnBmB,MAAM,IAAIf,IAAI,CAACG,QAAQ;MAC3B;MACA,OAAOY,MAAM;IACjB,CAAC;IAAA,KAEAC,aAAa,GAAG,MAAM;MACnB,IAAIpB,IAAI,GAAGC,OAAO,CAAC,CAAC;MACpB,IAAIoB,KAAK,GAAG,CAAC;MACb,KAAK,IAAIjB,IAAI,IAAIJ,IAAI,EAAE;QACnBqB,KAAK,IAAIjB,IAAI,CAACG,QAAQ,GAAGH,IAAI,CAACkB,KAAK;MACvC;MACA,OAAOD,KAAK;IAChB,CAAC;IA/DG,IAAIrB,KAAI,GAAGc,YAAY,CAACS,OAAO,CAAC,QAAQ,CAAC;IACzC,IAAIvB,KAAI,IAAI,IAAI,EAAE;MACd,OAAO,EAAE;IACb,CAAC,MAAM;MACH,OAAOgB,IAAI,CAACQ,KAAK,CAACxB,KAAI,CAAC;IAC3B;EACJ;AA4DJ;AAEA,eAAeJ,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}