{"ast":null,"code":"import _slicedToArray from\"C:/Nina/Scolarite/Matane/ProjetMultimedia/Borne/PM4-TP2/appreact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from\"react\";import Button from\"./Button\";import{GlobalContext}from'../App.jsx';import{observer}from\"mobx-react-lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function QuantityButton(_ref){var _ref$row=_ref.row,row=_ref$row===void 0?true:_ref$row,className=_ref.className,article=_ref.article,small=_ref.small,_ref$popUp=_ref.popUp,popUp=_ref$popUp===void 0?false:_ref$popUp;var _useContext=useContext(GlobalContext),cartStore=_useContext.cartStore;var direction=row?\"row\":\"col\";var _useState=useState(''),_useState2=_slicedToArray(_useState,2),animationClass=_useState2[0],setAnimationClass=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),animationKey=_useState4[0],setAnimationKey=_useState4[1];var disabled=article.quantity>0?false:true;var _useState5=useState(cartStore.getQuantityForArticle(article)),_useState6=_slicedToArray(_useState5,2),previousQuantity=_useState6[0],setPreviousQuantity=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isFirstRender=_useState8[0],setIsFirstRender=_useState8[1];var handleAddToCart=function handleAddToCart(){cartStore.addCart(article);};var handleRemoveFromCart=function handleRemoveFromCart(){cartStore.removeFromCart(article);};useEffect(function(){var currentQuantity=cartStore.getQuantityForArticle(article);if(!isFirstRender){if(currentQuantity>previousQuantity){if(row){setAnimationClass('slide-left-animation');}else{setAnimationClass('slide-up-animation');}setAnimationKey(function(prev){return prev+1;});}else if(currentQuantity<previousQuantity){if(row){setAnimationClass('slide-right-animation');}else{setAnimationClass('slide-down-animation');}setAnimationKey(function(prev){return prev+1;});}}else{setIsFirstRender(false);}setPreviousQuantity(currentQuantity);},[cartStore.getQuantityForArticle(article)]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-\".concat(direction,\" justify-between items-center \").concat(className&&className),children:[row===false?/*#__PURE__*/_jsx(Button,{title:\"Ajouter\",icon:\"faPlus\",onClick:handleAddToCart,small:small&&small===true?true:false}):/*#__PURE__*/_jsx(Button,{title:\"Retirer\",icon:\"faMinus\",onClick:handleRemoveFromCart,small:small&&small===true?true:false,disabled:disabled}),/*#__PURE__*/_jsx(\"p\",{className:\"p-3 \".concat(popUp===true?\"lg:text-4xl sm:text-3xl\":\"text-2xl\",\" \").concat(animationClass),children:cartStore.getQuantityForArticle(article)},animationKey),row===false?/*#__PURE__*/_jsx(Button,{title:\"Retirer\",icon:\"faMinus\",onClick:handleRemoveFromCart,small:small&&small===true?true:false,disabled:disabled}):/*#__PURE__*/_jsx(Button,{title:\"Ajouter\",icon:\"faPlus\",onClick:handleAddToCart,small:small&&small===true?true:false})]});}export default observer(QuantityButton);","map":{"version":3,"names":["React","useContext","useState","useEffect","Button","GlobalContext","observer","jsx","_jsx","jsxs","_jsxs","QuantityButton","_ref","_ref$row","row","className","article","small","_ref$popUp","popUp","_useContext","cartStore","direction","_useState","_useState2","_slicedToArray","animationClass","setAnimationClass","_useState3","_useState4","animationKey","setAnimationKey","disabled","quantity","_useState5","getQuantityForArticle","_useState6","previousQuantity","setPreviousQuantity","_useState7","_useState8","isFirstRender","setIsFirstRender","handleAddToCart","addCart","handleRemoveFromCart","removeFromCart","currentQuantity","prev","concat","children","title","icon","onClick"],"sources":["C:/Nina/Scolarite/Matane/ProjetMultimedia/Borne/PM4-TP2/appreact/src/components/QuantityButton.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport Button from \"./Button\";\r\nimport { GlobalContext } from '../App.jsx';\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nfunction QuantityButton({ row = true, className, article, small, popUp = false }) {\r\n\r\n    const { cartStore } = useContext(GlobalContext);\r\n    const direction = row ? \"row\" : \"col\";\r\n    const [animationClass, setAnimationClass] = useState('');\r\n    const [animationKey, setAnimationKey] = useState(0);\r\n    const disabled = article.quantity > 0 ? false : true;\r\n    const [previousQuantity, setPreviousQuantity] = useState(cartStore.getQuantityForArticle(article));\r\n    const [isFirstRender, setIsFirstRender] = useState(true);\r\n\r\n\r\n    const handleAddToCart = () => {\r\n        cartStore.addCart(article);\r\n    };\r\n\r\n    const handleRemoveFromCart = () => {\r\n        cartStore.removeFromCart(article);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const currentQuantity = cartStore.getQuantityForArticle(article);\r\n\r\n        if (!isFirstRender) {\r\n            if (currentQuantity > previousQuantity) {\r\n                if (row) {\r\n                    setAnimationClass('slide-left-animation');\r\n                } else {\r\n                    setAnimationClass('slide-up-animation');\r\n                }\r\n                setAnimationKey(prev => prev + 1);\r\n            } else if (currentQuantity < previousQuantity) {\r\n                if (row) {\r\n                    setAnimationClass('slide-right-animation');\r\n                } else {\r\n                    setAnimationClass('slide-down-animation');\r\n                }\r\n                setAnimationKey(prev => prev + 1);\r\n            }\r\n        } else {\r\n            setIsFirstRender(false);\r\n        }\r\n\r\n        setPreviousQuantity(currentQuantity);\r\n    }, [cartStore.getQuantityForArticle(article)]);\r\n\r\n\r\n    return (\r\n\r\n        <div className={`flex flex-${direction} justify-between items-center ${className && className}`}>\r\n            {row === false\r\n                ? <Button title=\"Ajouter\" icon=\"faPlus\" onClick={handleAddToCart} small={small && small === true ? true : false} />\r\n                : <Button title=\"Retirer\" icon=\"faMinus\" onClick={handleRemoveFromCart} small={small && small === true ? true : false} disabled={disabled} />}\r\n            <p key={animationKey} className={`p-3 ${popUp === true ? `lg:text-4xl sm:text-3xl` : `text-2xl`} ${animationClass}`}>\r\n                {cartStore.getQuantityForArticle(article)}\r\n            </p>\r\n            {row === false\r\n                ? <Button title=\"Retirer\" icon=\"faMinus\" onClick={handleRemoveFromCart} small={small && small === true ? true : false} disabled={disabled} />\r\n                : <Button title=\"Ajouter\" icon=\"faPlus\" onClick={handleAddToCart} small={small && small === true ? true : false} />}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default observer(QuantityButton);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}