{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Nina/Projects/Pro/borne-interactive/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Nina/Projects/Pro/borne-interactive/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Nina/Projects/Pro/borne-interactive/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{makeAutoObservable}from\"mobx\";var TPS_VALUE=0.05;var TVQ_VALUE=0.09975;var CartStore=/*#__PURE__*/function(){// Tableau pour stocker les articles du panier\nfunction CartStore(){_classCallCheck(this,CartStore);var currentCart=localStorage.getItem(\"Panier\");if(currentCart===null){this._cart=[];}else{this._cart=JSON.parse(currentCart);}makeAutoObservable(this);}_createClass(CartStore,[{key:\"cart\",get:function get(){return this._cart;},set:function set(cart){this._cart=cart;}//Sauvegarde le panier dans le localStorage\n},{key:\"saveCart\",value:function saveCart(){localStorage.setItem(\"Panier\",JSON.stringify(this.cart));}//Ajoute un article dans le panier\n},{key:\"addCart\",value:function addCart(article){var foundArticle=this.cart.find(function(item){return item.id===article.id;});if(foundArticle!==undefined){foundArticle.quantity++;}else{article.quantity=1;this.cart.push(article);}this.saveCart();}//Retire un article du panier\n},{key:\"removeFromCart\",value:function removeFromCart(article){if(article.quantity>1){article.quantity--;}else{article.quantity=0;this.cart=this.cart.filter(function(item){return item.id!==article.id;});}this.saveCart();}},{key:\"changeQuantity\",value:function changeQuantity(article,quantity){var foundArticle=this.cart.find(function(item){return item.id===article.id;});if(foundArticle!==undefined){foundArticle.quantity+=quantity;if(foundArticle.quantity<=0){this.removeFromCart(foundArticle);}else{this.saveCart();}}}//Récupère le nombre total d'articles dans le panier\n},{key:\"getNumberArticle\",value:function getNumberArticle(){var number=0;var _iterator=_createForOfIteratorHelper(this.cart),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;number+=item.quantity;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return number;}//Récupère le montant total du panier\n},{key:\"getGrossCartTotal\",value:function getGrossCartTotal(){var total=0;var _iterator2=_createForOfIteratorHelper(this.cart),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var item=_step2.value;total+=item.quantity*item.price;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return this.round(total);}//Calcul TPS\n},{key:\"getTPS\",value:function getTPS(){var tps=this.getGrossCartTotal()*TPS_VALUE;return this.round(tps);}//Calcul TVQ\n},{key:\"getTVQ\",value:function getTVQ(){var tvq=this.getGrossCartTotal()*TVQ_VALUE;return this.round(tvq);}//Récupère le montant total du panier avec taxes\n},{key:\"getCartTotalWithTaxes\",value:function getCartTotalWithTaxes(){var total=this.getGrossCartTotal()+this.getTPS()+this.getTVQ();return this.round(total);}//Récupère la quantité d'un article présent dans le panier\n},{key:\"getQuantityForArticle\",value:function getQuantityForArticle(article){var foundArticle=this.cart.find(function(item){return item.id===article.id;});return foundArticle?foundArticle.quantity:0;}//Récupère le contenu du panier sous forme d'objet\n},{key:\"getCartContents\",value:function getCartContents(){var cartContents=[];var _iterator3=_createForOfIteratorHelper(this.cart),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value;cartContents.push({id:item._id,name:item._name,quantity:item._quantity,price:item._price});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return cartContents;}//Appliquer une réduction fixe\n},{key:\"applyDiscount\",value:function applyDiscount(number){return this.getCartTotalWithTaxes-number;}// Vide le localStorage\n},{key:\"clearLocalStorage\",value:function clearLocalStorage(){localStorage.removeItem(\"Panier\");var _iterator4=_createForOfIteratorHelper(this.cart),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var item=_step4.value;if(item.quantity!==0){item.quantity=0;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._cart=[];this.saveCart();}//arrondir au centième\n},{key:\"round\",value:function round(number){var _number$toString$spli;var decimalCount=((_number$toString$spli=number.toString().split('.')[1])===null||_number$toString$spli===void 0?void 0:_number$toString$spli.length)||0;if(decimalCount>=3){number=parseFloat(number.toFixed(2));}return number;}}]);return CartStore;}();export default CartStore;","map":{"version":3,"names":["makeAutoObservable","TPS_VALUE","TVQ_VALUE","CartStore","_classCallCheck","currentCart","localStorage","getItem","_cart","JSON","parse","_createClass","key","get","set","cart","value","saveCart","setItem","stringify","addCart","article","foundArticle","find","item","id","undefined","quantity","push","removeFromCart","filter","changeQuantity","getNumberArticle","number","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","getGrossCartTotal","total","_iterator2","_step2","price","round","getTPS","tps","getTVQ","tvq","getCartTotalWithTaxes","getQuantityForArticle","getCartContents","cartContents","_iterator3","_step3","_id","name","_name","_quantity","_price","applyDiscount","clearLocalStorage","removeItem","_iterator4","_step4","_number$toString$spli","decimalCount","toString","split","length","parseFloat","toFixed"],"sources":["C:/Nina/Projects/Pro/borne-interactive/src/store/CartStore.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\n\nconst TPS_VALUE = 0.05;\nconst TVQ_VALUE =  0.09975;\n\n\nclass CartStore {\n    _cart; // Tableau pour stocker les articles du panier\n\n    constructor() {\n        let currentCart = localStorage.getItem(\"Panier\");\n        if (currentCart === null) {\n            this._cart = [];\n        } else {\n            this._cart = JSON.parse(currentCart);\n        }\n\n        makeAutoObservable(this);\n    }\n\n    get cart() { return this._cart; }\n\n    set cart(cart) { this._cart = cart; }\n\n    //Sauvegarde le panier dans le localStorage\n    saveCart() {\n        localStorage.setItem(\"Panier\", JSON.stringify(this.cart));\n    }\n\n    //Ajoute un article dans le panier\n    addCart(article) {\n        let foundArticle = this.cart.find(item => item.id === article.id);\n        if (foundArticle !== undefined) {\n            foundArticle.quantity++;\n        } else {\n            article.quantity = 1;\n            this.cart.push(article);\n        }\n        this.saveCart();\n    }\n\n    //Retire un article du panier\n    removeFromCart(article) {\n        if (article.quantity > 1) {\n            article.quantity--;\n        } else {\n            article.quantity = 0;\n            this.cart = this.cart.filter(item => item.id !== article.id);\n        }\n        this.saveCart();\n    }\n\n    changeQuantity(article, quantity) {\n        let foundArticle = this.cart.find(item => item.id === article.id);\n        if (foundArticle !== undefined) {\n            foundArticle.quantity += quantity;\n            if (foundArticle.quantity <= 0) {\n                this.removeFromCart(foundArticle);\n            } else {\n                this.saveCart();\n            }\n        }\n    }\n\n    //Récupère le nombre total d'articles dans le panier\n    getNumberArticle() {\n        let number = 0;\n        for (let item of this.cart) {\n            number += item.quantity;\n        }\n        return number;\n    }\n\n    //Récupère le montant total du panier\n    getGrossCartTotal() {\n        let total = 0;\n        for (let item of this.cart) {\n            total += item.quantity * item.price;\n        }\n        return this.round(total);\n    }\n\n     //Calcul TPS\n     getTPS() {\n        let tps = this.getGrossCartTotal() * TPS_VALUE;\n        return this.round(tps);\n    }\n\n     //Calcul TVQ\n     getTVQ() {\n        let tvq = this.getGrossCartTotal() * TVQ_VALUE;\n        return this.round(tvq);\n    }\n\n     //Récupère le montant total du panier avec taxes\n     getCartTotalWithTaxes() {\n        let total = this.getGrossCartTotal() + this.getTPS() + this.getTVQ();\n        return this.round(total);\n    }\n\n    //Récupère la quantité d'un article présent dans le panier\n    getQuantityForArticle(article) {\n        const foundArticle = this.cart.find((item) => item.id === article.id);\n        return foundArticle ? foundArticle.quantity : 0;\n    }\n\n    //Récupère le contenu du panier sous forme d'objet\n    getCartContents() {\n        const cartContents = [];\n        for (const item of this.cart) {\n            cartContents.push({\n                id: item._id,\n                name: item._name,\n                quantity: item._quantity,\n                price: item._price\n            });\n        }\n        return cartContents;\n    }\n\n    //Appliquer une réduction fixe\n    applyDiscount(number) {\n        return this.getCartTotalWithTaxes - number;\n    }\n\n    // Vide le localStorage\n    clearLocalStorage() {\n        localStorage.removeItem(\"Panier\");\n        for (const item of this.cart) {\n            if (item.quantity !== 0) {item.quantity = 0}\n        }\n        this._cart = [];\n        this.saveCart();\n    }\n\n    //arrondir au centième\n    round(number) {\n        const decimalCount = number.toString().split('.')[1]?.length || 0;\n        if (decimalCount >= 3) {\n            number = parseFloat(number.toFixed(2)); \n        }\n\n        return number;\n    }\n\n}\n\nexport default CartStore;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}